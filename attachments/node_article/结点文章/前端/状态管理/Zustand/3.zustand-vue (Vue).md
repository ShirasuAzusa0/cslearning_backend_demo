+   [](https://awesomedevin.github.io/zustand-vue/)
+   快速入门
+   zustand-vue (Vue)

## zustand-vue (Vue)

[![Build Size](https://img.shields.io/bundlephobia/minzip/zustand-vue?label=bundle%20size)](https://bundlephobia.com/result?p=zustand-vue) [![Version](https://img.shields.io/npm/v/zustand-vue?style=flat)](https://www.npmjs.com/package/zustand-vue)

### Step 1: 安装[](#step-1-安装 "标题的直接链接")

```shell
npm install zustand-vue # or yarn add zustand-vue
```

### Step 2: Store 初始化[](#step-2-store-初始化 "标题的直接链接")

创建的 store 是一个 `hook`，你可以放任何东西到里面：基础变量，对象、函数，状态必须不可改变地更新，`set` 函数合并状态以实现状态更新。

```js
import create from "zustand-vue";const useBearStore = create((set) => ({  bears: 0,  increasePopulation: () => set((state) => ({ bears: state.bears + 1 })),  setBears: (val)=>set({ bears: value })  removeAllBears: () => set({ bears: 0 }),}))export default useBearStore
```

### Step 3: Store 绑定组件，就完成了![](#step-3-store-绑定组件就完成了 "标题的直接链接")

基于 `selector` 获取您的目标状态，组件将在状态更改时重新渲染。

信息

Store 绑定组件在 `vue3` 与 `vue2` 中有所不同。

Vue3

#### 选择目标状态：bears[](#选择目标状态bears "标题的直接链接")

方式1：在 `setup` 中选择状态

```js
<template>  <div>store.bears: {{ bears }}</div></template><script setup>import useBearStore from "./store";const bears = useBearStore((state) => state.bears)</script>
```

方式2: 基于 `useBearStore` 初始化 data

```js
<template>  <div>store.bears: {{ bears }}</div></template><script>import useBearStore from "./store";export default {  data() {    return {      store: useBearStore(),      bears: useBearStore((state) => state.bears),    };  }};</script>
```

#### 更新目标状态：bears[](#更新目标状态bears "标题的直接链接")

+   方式1: 在 `setup` 中触发更新

```js
<script setup lang="ts">import useBearStore from "./store";const increasePopulation = useBearStore((state) => state.increasePopulation);const removeAllBears = useBearStore((state) => state.removeAllBears);</script><template>  <button @click="increasePopulation">increasePopulation</button>  <button @click="removeAllBears">removeAllBears</button></template>
```

+   方式2: 基于 `store` 初始化 `methods` 触发更新

```js
<script>import useBearStore from "./store";const increasePopulation = useBearStore((state) => state.increasePopulation);const removeAllBears = useBearStore((state) => state.removeAllBears);export default {  methods: {    increasePopulation,    removeAllBears,  },};</script><template>  <button @click="increasePopulation">increasePopulation</button>  <button @click="removeAllBears">removeAllBears</button></template>
```

+   方式3: 基于 `methods` 调用函数进行更新

```js
<script>import useBearStore from "./store";const increase = useBearStore((state) => state.increasePopulation);const remove = useBearStore((state) => state.removeAllBears);export default {  methods: {    increasePopulation() {      increase();    },    removeAllBears() {      remove();    },  },};</script><template>  <button @click="increasePopulation">increasePopulation</button>  <button @click="removeAllBears">removeAllBears</button></template>
```

Vue2

#### 选择目标状态：bears[](#选择目标状态bears-1 "标题的直接链接")

危险

vue2 环境下，由于兼容性问题，不推荐 `selector`，建议采用 `useBearStore()` 获取状态

```js
<template>  <div>store.bears: {{ Store.bears }}</div></template><script>import useBearStore from "./store";export default {  data() {    return {      Store: useBearStore(),    };  },};</script>
```

也可以配合 `computed` 进行使用

```js
<template>  <div>store.bears: {{ bears }}</div></template><script>import useBearStore from "./store";export default {  data() {    return {      Store: useBearStore(),    };  },  computed: {    bears() {      return this.store.bears;    },  },};</script>
```

#### 更新目标状态：bears[](#更新目标状态bears-1 "标题的直接链接")

+   方式1: 基于 `store` 初始化 `methods` 触发更新

```js
<script>import useBearStore from "./store";const increasePopulation = useBearStore((state) => state.increasePopulation);const removeAllBears = useBearStore((state) => state.removeAllBears);export default {  methods: {    increasePopulation,    removeAllBears,  },};</script><template>  <button @click="increasePopulation">increasePopulation</button>  <button @click="removeAllBears">removeAllBears</button></template>
```

+   方式2: 基于 `methods` 调用函数进行更新

```js
<script>import useBearStore from "./store";const increase = useBearStore((state) => state.increasePopulation);const remove = useBearStore((state) => state.removeAllBears);export default {  methods: {    increasePopulation() {      increase();    },    removeAllBears() {      remove();    },  },};</script><template>  <button @click="increasePopulation">increasePopulation</button>  <button @click="removeAllBears">removeAllBears</button></template>
```

信息

由于 zustand-vue 遵循 `flux` 模型，其 state 具备`不可变更新`特性，当你绑定 Input(表单) 组件时，`v-model` 语法糖将失效，必须用 `set` 来更新 `state`，以下根据 vue2、vue3 分别例举不同的方式：

Vue3

+   方式1

```js
<template>  <input v-model="bears" @input="handleChange" />  {/* or <input :bind="bears" @input="handleChange" /> */}</template><script setup>  import useBearStore from "./store";  const setBears = useBearStore((state) => state.setBears);  const handleChange = (e) => { setBears(e.target.value) }</script>
```

+   方式2

```js
<template>  <input v-model="bears" @input="handleChange" />  {/* or <input :bind="bears" @input="handleChange" /> */}</template><script>import useBearStore from "./store";const setBears = useBearStore((state) => state.setBears);export default {  data() {    return {      bears: useBearStore((state) => state.bears),    };  },  methods: {    handleChange(e){      setBears(e.target.value)    }  }};</script>
```

Vue2

+   方式1

```js
<template>  <input v-model="bears" /></template><script>import useBearStore from "./store";const setBears = useBearStore((state) => state.setBears);export default {  data() {    return {      store: useBearStore(),    };  },  computed:{    bears:{      get(){        return this.store.bears      },      set(val){        setBears(val)      }    }  }};</script>
```

+   方式2

```js
<template>  <input v-model="store.bears" @input="handleChange" />  {/* or <input :bind="bears" @input="handleChange" /> */}</template><script>import useBearStore from "./store";const setBears = useBearStore((state) => state.setBears);export default {  data() {    return {      store: useBearStore(),    };  },  methods:{    handleChange(e){      setBears(e.target.value)    }  }};</script>
```

[

上一页

zustand (React)

](https://awesomedevin.github.io/zustand-vue/docs/introduce/start/zustand)[

下一页

zustand-pub (跨应用/跨框架 状态管理及共享)

](https://awesomedevin.github.io/zustand-vue/docs/introduce/start/zustand-pub)