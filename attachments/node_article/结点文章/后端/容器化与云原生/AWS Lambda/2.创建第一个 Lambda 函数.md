## 创建第一个 Lambda 函数

要开始使用 Lambda，请使用 Lambda 控制台创建函数。您可以在几分钟的时间内创建和部署函数，并在控制台中对其进行测试。

在学习本教程时，您将学习一些基本的 Lambda 概念，例如如何使用 Lambda *事件对象*将参数传递给函数。您还将学习如何从函数返回日志输出，以及如何在 Amazon CloudWatch Logs 中查看函数的调用日志。

为了简单起见，您可以使用 Python 或 Node.js 运行时系统创建函数。您可以使用这些解释性语言，在控制台的内置代码编辑器中直接编辑函数代码。如果使用 Java 和 C# 等编译语言，则您必须在本地生成计算机上创建部署包并将其上传到 Lambda。要了解如何使用其他运行时系统将函数部署到 Lambda，请参阅 [其他资源和后续步骤](#getting-started-more-resources) 一节中的链接。

## 先决条件

如果您还没有 AWS 账户，请完成以下步骤来创建一个。

###### 注册 AWS 账户

1.  打开 [https://portal.aws.amazon.com/billing/signup](https://portal.aws.amazon.com/billing/signup)。
    
2.  按照屏幕上的说明操作。
    
    在注册时，将接到电话，要求使用电话键盘输入一个验证码。
    
    当您注册 AWS 账户 时，系统将会创建一个 *AWS 账户根用户*。根用户有权访问该账户中的所有 AWS 服务和资源。作为最佳安全实践，请为用户分配管理访问权限，并且只使用根用户来执行[需要根用户访问权限的任务](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_root-user.html#root-user-tasks)。
    

注册过程完成后，AWS 会向您发送一封确认电子邮件。在任何时候，您都可以通过转至 [https://aws.amazon.com/](https://aws.amazon.com/) 并选择**我的账户**来查看当前的账户活动并管理您的账户。

注册 AWS 账户 后，请保护好您的 AWS 账户根用户，启用 AWS IAM Identity Center，并创建一个管理用户，以避免使用根用户执行日常任务。

###### 保护您的 AWS 账户根用户

1.  选择**根用户**并输入您的 AWS 账户 电子邮件地址，以账户拥有者身份登录 [AWS Management Console](https://console.aws.amazon.com/)。在下一页上，输入您的密码。
    
    要获取使用根用户登录方面的帮助，请参阅《AWS 登录 用户指南》中的[以根用户身份登录](https://docs.aws.amazon.com/signin/latest/userguide/console-sign-in-tutorials.html#introduction-to-root-user-sign-in-tutorial)。
    
2.  为您的根用户启用多重身份验证（MFA）。
    
    有关说明，请参阅《IAM 用户指南》中的[为 AWS 账户 根用户启用虚拟 MFA 设备（控制台）](https://docs.aws.amazon.com/IAM/latest/UserGuide/enable-virt-mfa-for-root.html)。
    

###### 创建具有管理访问权限的用户

1.  启用 IAM Identity Center。
    
    有关说明，请参阅《AWS IAM Identity Center 用户指南》中的[启用 AWS IAM Identity Center](https://docs.aws.amazon.com/singlesignon/latest/userguide/get-set-up-for-idc.html)。
    
2.  在 IAM Identity Center 中，为用户授予管理访问权限。
    
    有关如何使用 IAM Identity Center 目录 作为身份源的教程，请参阅《AWS IAM Identity Center 用户指南》中的[使用默认的 IAM Identity Center 目录 配置用户访问权限](https://docs.aws.amazon.com/singlesignon/latest/userguide/quick-start-default-idc.html)。
    

###### 以具有管理访问权限的用户身份登录

+   要使用您的 IAM Identity Center 用户身份登录，请使用您在创建 IAM Identity Center 用户时发送到您的电子邮件地址的登录网址。
    
    要获取使用 IAM Identity Center 用户登录方面的帮助，请参阅《AWS 登录 User Guide》中的 [Signing in to the AWS access portal](https://docs.aws.amazon.com/signin/latest/userguide/iam-id-center-sign-in-tutorial.html)。
    

###### 将访问权限分配给其他用户

1.  在 IAM Identity Center 中，创建一个权限集，该权限集遵循应用最低权限的最佳做法。
    
    有关说明，请参阅《AWS IAM Identity Center 用户指南》中的[创建权限集](https://docs.aws.amazon.com/singlesignon/latest/userguide/get-started-create-a-permission-set.html)。
    
2.  将用户分配到一个组，然后为该组分配单点登录访问权限。
    
    有关说明，请参阅《AWS IAM Identity Center 用户指南》中的[添加组](https://docs.aws.amazon.com/singlesignon/latest/userguide/addgroups.html)。
    

## 使用控制台创建 Lambda 函数

在此示例中，函数采用一个 JSON 对象，其中包含两个标记有 `"length"` 和 `"width"` 的整数值。该函数将这些值相乘来计算区域，并将其作为 JSON 字符串返回。

函数还会输出计算区域及其 CloudWatch 日志组名称。在本教程的后面部分，您将学习使用 [CloudWatch Logs](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html) 查看函数调用记录。

###### 使用控制台创建 Hello world Lambda 函数

1.  打开 Lamba 控制台的 [Functions page](https://console.aws.amazon.com/lambda/home#/functions)（函数页面）。
    
2.  选择 **Create function**（创建函数）。
    
3.  选择**从头开始编写**。
    
4.  在**基本信息**窗格中，为**函数名称**输入 `` `myLambdaFunction` ``。
    
5.  对于**运行时**，选择 **Node.js 22.x** 或 **Python 3.13**。
    
6.  保留**架构**设置为 **x86\_64**，然后选择**创建函数**。
    

除了返回消息 `Hello from Lambda!` 的简单函数之外，Lambda 还为您的函数创建了一个[执行角色](https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/lambda-intro-execution-role.html)。执行角色是一个 AWS Identity and Access Management（IAM）角色，用于向 Lambda 函数授予访问 AWS 服务和资源的权限。而 Lambda 为函数创建的角色用于授予写入 CloudWatch Logs 的基本权限。

使用控制台的内置代码编辑器，将 Lambda 创建的 Hello world 代码替换为自己的函数代码。

## 使用控制台代码编辑器调用 Lambda 函数

要使用 Lambda 控制台代码编辑器调用函数，请创建一个发送到函数的测试事件。该事件是包含两个键值对的 JSON 格式文档，其中键为 `"length"` 和 `"width"`。

###### 创建测试事件

1.  在控制台代码编辑器的**测试事件**部分中，选择**创建测试事件**。
    
    ![在 Lambda 控制台代码编辑器中创建测试事件按钮](https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/images/getting-started-tutorial/test-event.png)
    
2.  对于 **Event Name (事件名称)**，输入 `myTestEvent`。
    
3.  在**事件 JSON** 部分中，使用以下内容替换默认 JSON：
    
    ```
    {
      "length": 6,
      "width": 7
    }
    ```
    
4.  选择**保存**。
    

**测试函数并查看调用记录**

在控制台代码编辑器的**测试事件**部分中，选择测试事件旁边的运行图标：

![在 Lambda 控制台代码编辑器中运行测试事件按钮](https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/images/getting-started-tutorial/run-test-event.png)

函数完成运行后，**输出**选项卡中将显示响应和函数日志。您应该会看到类似于如下所示的结果：

在调用 Lambda 控制台之外的函数时，您必须使用 CloudWatch Logs 来查看函数的执行结果。

###### 在 CloudWatch Logs 中查看函数的调用记录

1.  打开 CloudWatch 控制台的 [Log groups page](https://console.aws.amazon.com/cloudwatch/home#logs:)（日志组页面）。
    
2.  选择函数 (`/aws/lambda/myLambdaFunction`) 的日志组。这是函数输出到控制台的日志组名称。
    
3.  向下滚动，选择要查看的函数调用的**日志流**。
    
    ![Lambda 函数的日志流列表。](https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/images/log-stream.png)
    
    您应该可以看到类似于如下所示的输出内容：
    

## 清理

使用完示例函数后，请将其删除。您还可以删除存储函数日志的日志组以及控制台创建的[执行角色](https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/lambda-intro-execution-role.html)。

###### 删除 Lambda 函数

1.  打开 Lamba 控制台的 [Functions（函数）页面](https://console.aws.amazon.com/lambda/home#/functions)。
    
2.  选择您创建的函数。
    
3.  依次选择**操作**和**删除**。
    
4.  在文本输入字段中键入 `confirm`，然后选择**删除**。
    

###### 删除日志组

1.  打开 CloudWatch 控制台的 [Log groups page](https://console.aws.amazon.com/cloudwatch/home#logs:)（日志组页面）。
    
2.  选择函数的日志组 (`/aws/lambda/myLambdaFunction`)。
    
3.  依次选择 **Actions**（操作）和 **Delete log group(s)**（删除日志组）。
    
4.  在 **Delete log group(s)**（删除日志组）对话框中，选择 **Delete**（删除）。
    

###### 删除执行角色

1.  打开 AWS Identity and Access Management (IAM) 控制台的 [Roles page](https://console.aws.amazon.com/iam/home?#/roles)（角色页面）。
    
2.  选择函数的执行角色（例如 `` myLambdaFunction-role-`31exxmpl` ``）。
    
3.  选择**删除**。
    
4.  在**删除角色**对话框中，输入角色名称，然后选择**删除**。
    

## 其他资源和后续步骤

现在，您已经使用控制台创建并测试了一个简单的 Lambda 函数，请继续执行以下后续步骤：

+   了解如何向函数添加依赖项并使用 .zip 部署包进行部署。从以下链接中选择首选语言。
    
+   要了解如何使用另一个 AWS 服务调用 Lambda 函数，请参阅[教程：使用 Amazon S3 触发器调用 Lambda 函数](https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/with-s3-example.html)。
    
+   选择以下教程之一，查看将 Lambda 与其他 AWS 服务结合使用的更复杂示例。
    
    +   [教程：利用 API Gateway 使用 Lambda](https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/services-apigateway-tutorial.html)：创建调用 Lambda 函数的 Amazon API Gateway REST API。
        
    +   [使用 Lambda 函数访问 Amazon RDS 数据库](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/rds-lambda-tutorial.html)：使用 Lambda 函数通过 RDS 代理将数据写入 Amazon Relational Database Service（Amazon RDS）。
        
    +   [使用 Amazon S3 触发器创建缩略图](https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/with-s3-tutorial.html)：每次将图像文件上传到 Amazon S3 存储桶时，使用 Lambda 函数创建缩略图。